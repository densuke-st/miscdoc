.. _jpconfig:

日本語の設定
############

日本人エンジニアにとって、日本語の切り替えを行いながらのコード入力は非常につらいです。
また、日本語のIM(IME)の扱いについては、非常に注意が必要です。

フォントを見直す
****************

フォントについては、エンジニアとして使うツール類に関しては、以下を注意しておくといいでしょう。

* 英数の区別が付きやすいもの

  * 数字1と英小文字lやiと英大文字I
  * 数字0と英大文字O(稀に小文字oも)

* 空白が全角か半角か(というか全角の空白は存在自体がNG)
* 全角文字(ひらがな、カタカナ、漢字など)の幅が半角文字に対して統一のピッチで用意されているもの

  * いわゆる2倍系(一般的な非プロポーショナルフォント)を使うのが基準
  * 白源だと3:5というのもあります、読みやすくてピッチが揃えやすくていいかもしれませんが、端末などには不向き

これらを考慮しているエンジニア(プログラマ)向けフォントはオープンなもので結構みつかります。

* 白源(HackGen)系統
* Ricty Diminished.
* Migu 1M etc...

これら調べて導入し、IDEのフォント環境を確認しておくと良いでしょう。

全角空白を撲滅せよ
******************

残念ながら全角の空白は非エンジニアは無頓着に使う(行頭インデント調整のため等)ので、外部から入るものは仕方が無い。
しかし私たちが全角の空白を含まないようにすることはもちろん可能である。
下手に存在すると **プログラマが死ぬ** ため、自分たちが元凶にならないようにすべきである。

* 白源系フォントは全角空白が可視化されます
* IDEでは全角空白を可視化してくれることもあります

  * Eclipseだと非可視文字の可視化があるので、全角空白にチェックを入れておくことのがマナー
  * VScodeだと `可視化の拡張(zenkaku) <https://marketplace.visualstudio.com/items?itemName=mosapride.zenkaku>`_ もあるので利用するとよい

全角英数字を撲滅せよ
********************

私たちが加害者にならないよう、IMの設定を確認することが嗜み。

* macOSの日本語入力は標準的な方法で全角英数字・記号を排除する仕組みが無いため使用禁止

  * ちょっと言いすぎではある、もしかすると最新版でまた状況変わっているかもしれないので要注意
  
* Windowsの標準的なIMEは変更可能なので、初期段階でいじっておくこと
* Google日本語入力やATOK(Passport)も設定可能

変更のポリシーとしては、以下を意識すれば基本的に問題なし

* 英数字と空白は半角固定、入力時から半角固定
* カタカナは全角のみ

  * Unicode的には半角カナもあるので可能そうではあるがプログラミングでのコンセンサスは微妙なので使わない

* 記号の類いは少し注意が必要

  * 原則半角
  * カギ括弧(日本語で使うもの)は全角固定
  * クォート記号ももちろん半角
  * 句読点(`。、`)は全角固定
  * マイナス記号(`-`)はもちろん半角、全角の伸ばし棒(`ー`)との区別はきちんとすること

    * 一部金融機関で全角伸ばし棒を受容しないふざけたバリデーションもありますがそこはしかたない…

  * おそらく悩みどころはチルダ(`～` と `~`) 感情表現として日本語で伸ばし棒代わりに使うことがあるため『学習』に設定しています 

参考: Windows11の日本語IMEの場合
********************************

とりあえずWindows11の設定画面から進めて探していく。

.. figure:: /images/jpconfig-1.png
    :width: 75%

    個人設定からMicrosoft IMEの全般に入る

* :guilabel:`スペース` → 常に半角
* :guilabel:`テンキー` → 常に半角 

.. figure:: /images/jpconfig-2.png
    :width: 75%

    変換候補に半角カタカナを入れるのはNG

.. figure:: /images/jpconfig-3.png
    :width: 75%

    まともな設定は『以前のバージョンのMicrosoft IME』でないとできないので注意

どこかで日本語入力状態にしてプロパティを開く

.. figure:: /images/jpconfig-4.png
    :width: 75%

    日本語入力にしてから『あ』からプロパティを開く

.. figure:: /images/jpconfig-5.png
    :width: 75%

    詳細設定ボタンをクリック

.. figure:: /images/jpconfig-6.png
    :width: 75%

    全角/半角の設定を確認

* :guilabel:`カタカナ` → 常に全角に変換
* :guilabel:`英字` と :guilabel:`数字` → 常に半角に変換
* :guilabel:`記号` → 常に半角に変換

  * ただしチルダ記号だけ『前回の変換結果に従う』でその時の状況による変換を許容

半角チルダを入れるときはIMEをオフにするのであれば、常に全角にしておいてもかまわない。

たいせつなおまけ
****************

『 **日本語は2バイト** 』 は過去の話としておきましょう(今でも使われますが)。